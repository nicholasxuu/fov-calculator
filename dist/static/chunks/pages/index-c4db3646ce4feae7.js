(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{405:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(1107)}])},1107:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return I}});var d=c(9452),e=c(9242),f=c.n(e),g=c(1527),h=c(2114),i=c.n(h),j=c(959),k=c(2552),l=c(7664),m=c(2611),n=c(9446),o=c(4769);c(8484);var p=c(1934),q=c(5546),r=c(848);r.ZP.use(q.Db).init({resources:{en:{translation:{curvature:"Curvature",flat:"Flat",tripleMonitor:"Triple Monitor",tripleMonitorAngle:"Triple Monitor Angle",distanceToScreen:"Distance to Screen (cm)",screenSize:"Screen Size (inch)",aspectRatio:"Aspect Ratio"}},cn:{translation:{curvature:"屏幕曲率",flat:"平面屏",tripleMonitor:"三屏",tripleMonitorAngle:"三屏角度",distanceToScreen:"眼睛与屏幕距离 (厘米)",screenSize:"屏幕尺寸 (英寸)",aspectRatio:"屏幕比例"}}},lng:"cn",fallbackLng:"en",interpolation:{escapeValue:!1}});var s,t=r.ZP,u=c(3266),v=c.n(u),w=k.Z.Option,x="#f00",y={normX:.57,normTY:.67,normSY:.22,x:0,ty:0,sy:0},z=1,A=function(a){return new Promise(function(b){var c=new Image;c.src=a,c.onload=function(){b(c)}})},B=(s=(0,d.Z)(f().mark(function a(b){var c,d;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("load images"),b.globalAlpha=.5,a.next=4,A("fovcalc/assets/images/brz_top.jpg");case 4:return c=a.sent,a.next=7,A("fovcalc/assets/images/brz_side.jpg");case 7:d=a.sent,b.drawImage(c,0,0),b.drawImage(d,0,c.height+10),console.log(c.height,c.width),y.x=c.width*y.normX,y.ty=c.height*y.normTY,y.sy=d.height*y.normSY+c.height+10,z=c.width/495,console.log("load images complete");case 16:case"end":return a.stop()}},a)})),function(a){return s.apply(this,arguments)}),C=function(a){console.log("draw heads"),a.globalAlpha=1,a.fillStyle=x;var b=2*Math.PI,c=y.x+0,d=y.ty,e=y.sy;a.beginPath(),a.arc(c,d,6,0,b),a.fill(),a.beginPath(),a.arc(c,e,6,0,b),a.fill(),a.save()},D=function(a,b,c,d,e){a.beginPath();var f=(d-c)/2,g=Math.asin(f/e);a.arc(b+e*Math.cos(g),c+f,e,Math.PI-g,Math.PI+g,!1),a.stroke()},E=function(a,b,c,d){a.beginPath(),a.moveTo(b,c),a.lineTo(b,d),a.stroke()},F=function(a,b,c,d,e,f,g,h,i){if(a.lineWidth=1,a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke(),a.beginPath(),a.moveTo(b,c),a.lineTo(f,g),a.stroke(),d===f){var j=Math.abs(e-g),k=Math.sqrt(Math.pow(d-b,2)+Math.pow(e-c,2)),l=Math.abs(Math.asin(j/2/k)),m=Math.round(l/Math.PI*360);console.log(m);var n=10;a.fillText("".concat(m,"\xb0"),b+h,c+i+n/2)}},G=function(a,b,c,d,e,f,g){console.log("draw monitors"),a.globalAlpha=.5,a.strokeStyle=x;var h=y.x+0,i=y.ty,j=y.sy,k=H(c,d,e),l=h-b*z+k.thickness,m=h-b*z;console.log("monitorInfo",k);var n=i-k.w/2,o=j-k.h/2,p=f,q=i+k.w/2,r=i-k.w/2;if(a.lineWidth=5,E(a,m,o,o+k.h),F(a,h,j,m,o,m,o+k.h,-30,0),a.lineWidth=5,e<=0?E(a,l,n,n+k.w):D(a,l,n,n+k.w,e*z),F(a,h,i,l,n,l,n+k.w,-30,0),g){a.setTransform(1,0,0,1,0,0),a.translate(l+2.5,q),a.rotate(-p*Math.PI/180),a.translate(-l-2.5,-q),a.lineWidth=5,e<=0?E(a,l,q,q+k.w):D(a,l,q,q+k.w,e*z),a.setTransform(1,0,0,1,0,0),a.translate(l+2.5,r),a.rotate(p*Math.PI/180),a.translate(-l-2.5,-r),a.lineWidth=5,e<=0?E(a,l,r-k.w,r):D(a,l,r-k.w,r,e*z),a.setTransform(1,0,0,1,0,0);var s=k.w*Math.sin(p*Math.PI/180),t=k.w*Math.cos(p*Math.PI/180);F(a,h,i,l+s,n-t,l+s,n+k.w+t,10,0)}},H=function(a,b,c){var d=2.54*a*(b/Math.sqrt(1+b*b)),e=z*d,f=z*(2.54*a/b),g={thickness:5,h:0,w:0,curveAngle:0};if(c<=0)g.h=f,g.w=e;else{g.h=f,console.log("real width",d);var h=d/(2*c*Math.PI)*360/180*Math.PI;console.log("angle",h);var i=c-c*Math.cos(h/2),j=c*Math.sin(h/2)*2;g.thickness=i*z,g.w=j*z,g.curveAngle=h}return g},I=function(){var a=(0,j.useRef)(null),b=(0,q.$G)().t,c=(0,j.useState)(70),e=c[0],h=c[1],r=(0,j.useState)("cn"),s=r[0],u=r[1],x=(0,j.useState)(32),y=x[0],z=x[1],A=(0,j.useState)(16/9),D=A[0],E=A[1],F=(0,j.useState)(0),H=F[0],I=F[1],J=(0,j.useState)(!0),K=J[0],L=J[1],M=(0,j.useState)(60),N=M[0],O=M[1];return(0,j.useEffect)(function(){t.changeLanguage(s)},[s]),(0,j.useEffect)(function(){},[]),(0,j.useEffect)(function(){var b;(b=(0,d.Z)(f().mark(function b(){var c,d;return f().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=null===(c=a.current)|| void 0===c?void 0:c.getContext("2d")){b.next=4;break}return b.abrupt("return");case 4:return d.clearRect(0,0,600,490),b.next=7,B(d);case 7:C(d),G(d,e,y,D,H,N,K);case 9:case"end":return b.stop()}},b)})),function(){return b.apply(this,arguments)})()},[e,y,D,H,K,N,]),(0,g.jsxs)("div",{className:v().container,children:[(0,g.jsxs)(i(),{children:[(0,g.jsx)("title",{children:"fov calculator"}),(0,g.jsx)("meta",{name:"description",content:"fov calculator"}),(0,g.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,g.jsxs)("main",{className:v().main,children:[(0,g.jsx)("div",{className:v().header,children:(0,g.jsxs)(l.ZP.Group,{value:s,onChange:function(a){u(a.target.value)},children:[(0,g.jsx)(l.ZP.Button,{value:"en",children:"English"}),(0,g.jsx)(l.ZP.Button,{value:"cn",children:"中文"})]})}),(0,g.jsxs)("div",{className:v().body,children:[(0,g.jsx)("div",{className:v().display,children:(0,g.jsx)("canvas",{id:"fov-preview",ref:a,width:600,height:490})}),(0,g.jsxs)(m.Z,{className:v().mainform,name:"basic",labelCol:{span:8},wrapperCol:{span:16},children:[(0,g.jsx)(m.Z.Item,{label:b("tripleMonitor"),children:(0,g.jsx)(p.default,{value:K,checked:K,onChange:function(a){L(a.target.checked)}})}),(0,g.jsx)(m.Z.Item,{label:b("tripleMonitorAngle"),children:(0,g.jsx)(n.Z,{disabled:!K,value:N,min:0,max:90,marks:{0:"0",30:"30",60:"60",70:"70",90:"90"},onChange:O})}),(0,g.jsx)(m.Z.Item,{label:b("distanceToScreen"),children:(0,g.jsx)(n.Z,{value:e,min:40,max:200,marks:{40:"40",50:"50",70:"70",100:"100",150:"150",200:"200"},onChange:h})}),(0,g.jsxs)(m.Z.Item,{label:b("screenSize"),children:[(0,g.jsx)(n.Z,{value:y,min:5,max:85,marks:{15:"15",27:"27",32:"32",55:"55",65:"65",75:"75",85:"85"},onChange:z}),(0,g.jsx)(o.Z,{value:y,onChange:z})]}),(0,g.jsx)(m.Z.Item,{label:b("aspectRatio"),children:(0,g.jsxs)(k.Z,{value:D,style:{width:120},onChange:E,children:[(0,g.jsx)(w,{value:16/9,children:"16:9"}),(0,g.jsx)(w,{value:1.6,children:"16:10"}),(0,g.jsx)(w,{value:4/3,children:"4:3"}),(0,g.jsx)(w,{value:21/9,children:"21:9"}),(0,g.jsx)(w,{value:32/9,children:"32:9"})]})}),(0,g.jsx)(m.Z.Item,{label:b("curvature"),children:(0,g.jsxs)(l.ZP.Group,{value:"".concat(H),onChange:function(a){return I(parseInt(a.target.value))},children:[(0,g.jsx)(l.ZP.Button,{value:"80",children:"800R"}),(0,g.jsx)(l.ZP.Button,{value:"100",children:"1000R"}),(0,g.jsx)(l.ZP.Button,{value:"150",children:"1500R"}),(0,g.jsx)(l.ZP.Button,{value:"180",children:"1800R"}),(0,g.jsx)(l.ZP.Button,{value:"0",children:b("flat")})]})})]})]})]}),(0,g.jsxs)("footer",{className:v().footer,children:["Made in China, By ",(0,g.jsx)("a",{href:"https://github.com/nicholasxuu/",children:"nicholasxuu"})]})]})}},3266:function(a){a.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",header:"Home_header__GCVRv",body:"Home_body__XYSzx",display:"Home_display__0UZrh",form:"Home_form__k2xMg",footer:"Home_footer____T7K","unit-switch":"Home_unit-switch__t8E8S","unit-switch_slider":"Home_unit-switch_slider__pYjiQ","unit-switch_slider--thumb":"Home_unit-switch_slider--thumb__RWuni",inches:"Home_inches__Raocv","fov-preview":"Home_fov-preview__LcL68",slider:"Home_slider__ZQUgN",slider__track:"Home_slider__track__JXAQz","slider__thumb-container":"Home_slider__thumb-container__JDtvB",slider__thumb:"Home_slider__thumb__bUuSn"}}},function(a){a.O(0,[774,845,753,888,179],function(){var b;return a(a.s=405)}),_N_E=a.O()}])